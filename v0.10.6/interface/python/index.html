<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Python · PostNewtonian.jl</title><meta name="title" content="Python · PostNewtonian.jl"/><meta property="og:title" content="Python · PostNewtonian.jl"/><meta property="twitter:title" content="Python · PostNewtonian.jl"/><meta name="description" content="Documentation for PostNewtonian.jl."/><meta property="og:description" content="Documentation for PostNewtonian.jl."/><meta property="twitter:description" content="Documentation for PostNewtonian.jl."/><meta property="og:url" content="https://moble.github.io/PostNewtonian.jl/stable/interface/python/"/><meta property="twitter:url" content="https://moble.github.io/PostNewtonian.jl/stable/interface/python/"/><link rel="canonical" href="https://moble.github.io/PostNewtonian.jl/stable/interface/python/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PostNewtonian.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Interface</span><ul><li><a class="tocitem" href="../high-level/">High-level interface</a></li><li><a class="tocitem" href="../units/">Units</a></li><li><a class="tocitem" href="../differentiation/">Automatic differentiation</a></li><li><a class="tocitem" href="../assorted_binaries/">Assorted binaries</a></li><li class="is-active"><a class="tocitem" href>Python</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Testing-the-installation"><span>Testing the installation</span></a></li><li><a class="tocitem" href="#Full-Julia-interface-from-Python"><span>Full Julia interface from Python</span></a></li></ul></li><li><a class="tocitem" href="../gwframes/">GWFrames</a></li></ul></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../../internals/code_structure/">Code structure</a></li><li><a class="tocitem" href="../../internals/pn_systems/">PN systems</a></li><li><a class="tocitem" href="../../internals/fundamental_variables/">Fundamental variables</a></li><li><a class="tocitem" href="../../internals/derived_variables/">Derived variables</a></li><li><a class="tocitem" href="../../internals/pn_expressions/">PN expressions</a></li><li><a class="tocitem" href="../../internals/dynamics/">Dynamics</a></li><li><a class="tocitem" href="../../internals/waveforms/">Waveforms</a></li><li><a class="tocitem" href="../../internals/utilities/">Utilities</a></li></ul></li><li><a class="tocitem" href="../../adding_terms/">Adding terms</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Interface</a></li><li class="is-active"><a href>Python</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Python</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/moble/PostNewtonian.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/moble/PostNewtonian.jl/blob/main/docs/src/interface/python.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Using-this-package-from-Python"><a class="docs-heading-anchor" href="#Using-this-package-from-Python">Using this package from Python</a><a id="Using-this-package-from-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Using-this-package-from-Python" title="Permalink"></a></h1><p>While not quite as natural as calling Python code from Julia, it is very easy to call Julia code from Python.  The process is essentially the same as using any other Python package, other than installing Julia itself and any dependencies <em>within</em> Julia that you may need (both of which are much easier than similar tasks in Python).</p><div class="admonition is-warning"><header class="admonition-header">Be careful of using unicode in Python!</header><div class="admonition-body"><p>Every effort is made to ensure that <em>users</em> of this package can always use plain ASCII — even though this package uses Unicode <em>internally</em> and in many of the examples found in this documentation.  For example, if keyword arguments are accepted as Unicode, ASCII equivalents are usually also accepted.  Some function <em>names</em> are similarly in Unicode, but have ASCII equivalents.  See the various functions&#39; documentation for acceptable replacements.</p><p>It can be dangerous to use Unicode in Python in particular. Python only accepts a small subset of Unicode — so that <code>M₁</code> for example is not valid input.  And what it does accept is automatically <a href="https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms">&quot;NFKC normalized&quot;</a>. For example, variable names <code>Mₐ</code>, <code>Ma</code>, and <code>Mᵃ</code> are all treated identically by Python.  To illustrate this, consider the following python code:</p><pre><code class="language-python hljs">&gt;&gt;&gt; Mₐ = 1
&gt;&gt;&gt; Mᵃ = 2
&gt;&gt;&gt; Ma = 3
&gt;&gt;&gt; print((Mₐ, Mᵃ, Ma))
(3, 3, 3)</code></pre><p>We might have expected three different values <code>(1, 2, 3)</code> in the output, but Python never even sees the variable names as different strings; it interprets these expressions as setting, resetting, and resetting again the value of <code>Ma</code>.</p><p>If you find an example where ASCII substitutions are not possible, please file a <a href="https://github.com/moble/PostNewtonian.jl/issues/new">bug report</a>.</p></div></div><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><h3 id="0.-Optionally-pre-install-Julia"><a class="docs-heading-anchor" href="#0.-Optionally-pre-install-Julia">0. Optionally pre-install Julia</a><a id="0.-Optionally-pre-install-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#0.-Optionally-pre-install-Julia" title="Permalink"></a></h3><p>If you&#39;ll want to use Julia from outside of Python, install Julia first with <a href="https://github.com/JuliaLang/juliaup?tab=readme-ov-file#juliaup---julia-version-manager">the <code>juliaup</code> installer</a>.</p><h3 id="1.-Install-the-sxs-python-package"><a class="docs-heading-anchor" href="#1.-Install-the-sxs-python-package">1. Install the <code>sxs</code> python package</a><a id="1.-Install-the-sxs-python-package-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Install-the-sxs-python-package" title="Permalink"></a></h3><p>While not <em>strictly necessary</em>, the <code>sxs</code> python package is very useful for providing a general interface to waveforms, and will automatically install the PostNewtonian package and its dependencies (and even Julia, if necessary).</p><p>If you use <code>conda</code>, just run something like<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></p><pre><code class="language-bash hljs">conda install -c conda-forge sxs numba::numba numba::llvmlite</code></pre><p>If you prefer <code>pip</code>, use</p><pre><code class="language-bash hljs">python -m pip install sxs</code></pre><div class="admonition is-danger"><header class="admonition-header">Avoid segfaults on macOS</header><div class="admonition-body"><p>If using conda/mamba on macOS, you <em>must</em> install the correct versions of <code>numba</code> and <code>llvmlite</code>, or <a href="https://github.com/numba/numba/issues/7857#issuecomment-1082246028">you will get segfaults.</a> Specifically, you <em>must</em> include the <code>numba::</code> prefix to select the correct anaconda channel, as shown in the command given above.  A more permanent solution is to run the following commands:</p><pre><code class="nohighlight hljs">conda config --set channel_priority strict
conda config --add channels conda-forge --prepend channels numba</code></pre><p>This will automatically choose the correct versions of numba and llvmlite for your system, without the need to explicitly use the <code>numba::</code> prefix ever again.</p></div></div><h3 id="2.-Install-Julia-and-PostNewtonian.jl"><a class="docs-heading-anchor" href="#2.-Install-Julia-and-PostNewtonian.jl">2. Install Julia and <code>PostNewtonian.jl</code></a><a id="2.-Install-Julia-and-PostNewtonian.jl-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Install-Julia-and-PostNewtonian.jl" title="Permalink"></a></h3><p>The following line will take a few minutes to install Julia (if necessary), then download and compile all the necessary Julia packages.</p><pre><code class="language-bash hljs">python -c &#39;from sxs import julia&#39;</code></pre><h2 id="Testing-the-installation"><a class="docs-heading-anchor" href="#Testing-the-installation">Testing the installation</a><a id="Testing-the-installation-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-the-installation" title="Permalink"></a></h2><div class="admonition is-danger"><header class="admonition-header">Import this package first</header><div class="admonition-body"><p>When using this package from Python with any other non-standard libraries — like <code>scri</code> or <code>lal</code> — you should always import <code>sxs.julia</code> or one of its components <em>first</em> in your Python session. This is because those packages may use the same compiled libraries as this package, in the form of shared objects, like <code>libfftw3</code>.  But because Python packaging is so desperately bad, the libraries that come with Python packages are often quite old and will interfere with the operation of this package.  Loading this package first ensures that newer versions of the libraries are loaded, which will typically be backwards compatible.</p></div></div><p>Start up a python session and run something like this:</p><pre><code class="language-python hljs"># Any python imports you need go here
import numpy as np
import matplotlib.pyplot as plt

# Start the Julia session
from sxs.julia import PNWaveform

# Declare the essential parameters
M1 = 0.5
M2 = 0.5
chi1 = [0.1, 0.2, 0.3]
chi2 = [-0.2, 0.1, -0.3]
Omega_i = 0.01

# Call `sxs` wrapper for Julia functions
w = PNWaveform(M1, M2, chi1, chi2, Omega_i)

# Plot the magnitudes of all the modes as functions of time
plt.semilogy(w.t, np.abs(w.data))</code></pre><p>The <a href="https://github.com/sxs-collaboration/sxs/blob/e6aa63695fdb1a2f97cfb54e04dbbd5453142cd3/sxs/julia/__init__.py#L17-L86"><code>sxs.julia.PNWaveform</code> function</a> is a simple wrapper that calls <a href="../../internals/dynamics/#PostNewtonian.orbital_evolution"><code>orbital_evolution</code></a> and <a href="../../internals/waveforms/#PostNewtonian.inertial_waveform"><code>inertial_waveform</code></a>, then wraps the result in an <a href="https://sxs.readthedocs.io/en/stable/api/waveforms/#waveformmodes-class"><code>sxs.WaveformModes</code> object</a>, with all the usual methods and properties, as well as several additional fields relevant to post-Newtonian waveforms:</p><ul><li><code>M1</code> (array): The primary mass as a function of time.</li><li><code>M2</code> (array): The secondary mass as a function of time.</li><li><code>chi1</code> (array): The primary spin as a function of time.</li><li><code>chi2</code> (array): The secondary spin as a function of time.</li><li><code>frame</code> (array): The quaternionic frame as a function of time.</li><li><code>v</code> (array): The orbital velocity as a function of time.</li><li><code>orbital_phase</code> (array): The orbital phase as a function of   time.</li></ul><p>The input arguments for <a href="https://github.com/sxs-collaboration/sxs/blob/e6aa63695fdb1a2f97cfb54e04dbbd5453142cd3/sxs/julia/__init__.py#L17-L86"><code>sxs.julia.PNWaveform</code></a> are mostly the same as for <a href="../../internals/dynamics/#PostNewtonian.orbital_evolution"><code>orbital_evolution</code></a>, except that the keyword argument <code>inertial</code> will switch whether the returned waveform will be in the inertial frame (the default of <code>True</code>) or the coorbital frame (<code>False</code>), and the keyword arguments <code>ell_min</code>, <code>ell_max</code>, and <code>waveform_pn_order</code> will be intercepted and passed to <a href="../../internals/waveforms/#PostNewtonian.inertial_waveform"><code>inertial_waveform</code></a> or <a href="../../internals/waveforms/#PostNewtonian.coorbital_waveform"><code>coorbital_waveform</code></a> correspondingly.</p><h2 id="Full-Julia-interface-from-Python"><a class="docs-heading-anchor" href="#Full-Julia-interface-from-Python">Full Julia interface from Python</a><a id="Full-Julia-interface-from-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Full-Julia-interface-from-Python" title="Permalink"></a></h2><p>In general, you can now call any function from the Julia <code>PostNewtonian</code> package by running</p><pre><code class="language-python hljs">from sxs.julia import PostNewtonian</code></pre><p>and then calling the function just as you would if you had run <code>import PostNewtonian</code> in Julia.  That is, any of the functions given in the rest of this documentation should be available in Python, just as they would be in Julia.  (Again, note that all function names and arguments should have ASCII equivalents to use from Python.)</p><p>You can also evaluate <em>arbitrary Julia code</em> by prefixing <code>PostNewtonian.</code> to the command, or as a fallback write Julia code as a string and pass it to <code>PostNewtonian.seval(&quot;&lt;Julia code goes here&gt;&quot;)</code>.  Simple examples include</p><pre><code class="language-python hljs">&gt;&gt;&gt; PostNewtonian.println(&quot;Hello from Julia!&quot;)
Hello from Julia!
&gt;&gt;&gt; x = PostNewtonian.seval(&quot;1+2&quot;)
&gt;&gt;&gt; x
3</code></pre><p>See the <a href="https://github.com/cjdoris/PythonCall.jl#readme">documentation for <code>juliacall</code> here</a> for more details.</p><p>Whenever they correspond naturally to built-in Python types — like <code>int</code>, <code>float</code>, <code>str</code>, etc. — the returned objects will be converted to such Python objects.  Otherwise, the returned objects will be wrappers around Julia <code>Vector</code>s, <code>Matrix</code>es, or more generally shaped <code>Array</code>s.  Usually, you will be able to pass these objects directly to Python functions.  If you really need a <code>numpy</code> array, you can use the <code>to_numpy()</code> method that the wrappers will support.</p><p>Of course, it is <em>much</em> simpler to call Python code from Julia, so if you find yourself using a lot of Julia code, you may want to consider flipping your approach.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>As general advice, you should run <code>conda install -y mamba -n   base -c conda-forge</code>, and then just use the command <code>mamba</code>   wherever you would have used <code>conda</code>; <code>mamba</code> is a complete   drop-in replacement, but is much faster because it&#39;s written in   C instead of python.  For example, <code>mamba create -n julia_pn   python numpy matplotlib</code> will typically run faster than the   command given here.  This becomes a huge advantage when the env   has lots of dependencies.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../assorted_binaries/">« Assorted binaries</a><a class="docs-footer-nextpage" href="../gwframes/">GWFrames »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Tuesday 22 April 2025 23:22">Tuesday 22 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
